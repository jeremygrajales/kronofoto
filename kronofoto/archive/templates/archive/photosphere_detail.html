{% extends base_template %}
{% load static %}
{% load widgets %}
{% load krono_urls %}

{% block content %}
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

<div class="photosphere">
    <div id="fi-photosphere-metadata" class="photosphere-metadata" data-toggler=".expanded" data-closable>
        <div class="photosphere-metadata__expand-btn" data-toggle="fi-photosphere-metadata"></div>
        <div class="photosphere-metadata__close-btn" data-toggle="fi-photosphere-metadata"></div>
        <div class="photosphere-metadata__wrapper">
            <h2 class="photosphere-metadata__title">{{ object.title }}</h2>
            <div class="photosphere-metadata__description">{{ object.description | markdown }}</div>
        </div>
    </div>

    <form hx-get="https://fortepan.lndo.site/mainstreet360" hx-trigger="node-changed" hx-target="#fi-photosphere-metadata">
<!--        <div data-photosphere-data data-map="#photosphere-map" data-node-href="{% krono_url "kronofoto:mainstreetview.json" %}" data-node-start="{{ object.id }}" data-node-param="id" style="width: 100vw; height: 80vh">-->
<!--        </div>-->
        <div data-photosphere-data="#photosphere-data" data-node-href="https://fortepan.lndo.site//mainstreet360/json" data-node-start="{{ object.id }}" data-node-param="id" style="width: 100vw; height: 80vh">
        </div>
        <div id="photosphere-map" style="width: 100vw; height: 50vh;">
        </div>
        <input name="id" type="hidden" />
    </form>

    <div class="photosphere-map" id="photosphere-map" data-toggler=".expanded">
        <div class="photosphere-map__map"></div>
        <div class="photosphere-map__fullscreen" data-toggle="photosphere-map"></div>
        <div class="photosphere-map__zoom zoom-buttons">
            <div class="zoom-button__plus"></div>
            <div class="zoom-button__minus"></div>
        </div>
    </div>
</div>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

{% endblock %}
